<ion-content #chatContainer>
  <ion-row><!--*ngIf="new-matches"-->
    <!-- Not correct source, just placeholder for now -->
    <ion-item 
      detail="false"
      #matchesButton
      button 
      (click)="presentMatches()"
    >
      <ion-avatar slot="start">
        <ion-img 
          *ngFor="let chat of chats.slice(0,3); index as j" 
          [ngStyle]="{ 'zIndex': j, 
                        'margin-left': 20*j + 'px', 
                        'position': 'absolute', 
                        'width': 60 + 'px',
                        'height': 60 + 'px' }"
          [src]="chat?.recipient?.picture"
          class="match-image">
        </ion-img>
      </ion-avatar>
      <div class="text-container" id="match-text" [ngStyle]="styleFromMatches()">
        NUMBER new catches!
      </div>
    </ion-item>
  </ion-row>

  <ion-list *ngIf="chats">
    <ion-item
      detail="true"
      button
      (click)="goToMessenger(chat.id)"
      *ngFor="let chat of chats; index as i"
    >
      <ion-avatar slot="start">
        <ion-img [src]="chat?.recipient?.picture"></ion-img>
      </ion-avatar>
      <div class="text-container">
        <ion-label color="primary" class="text-container name">
          {{ chat?.recipient?.name }}</ion-label
        >
        <ion-label
          color="black"
          class="text-container chat"
          id="lastMessage"
          *ngIf="
            chat?.messages[chat.messages.length - 1]?.senderID === chat?.recipient?.uid
          "
        >
          {{
            shorten(
              chat?.recipient?.name +
                ": " +
                chat?.messages[chat.messages.length - 1]?.content
            )
          }}</ion-label
        >
        <ion-label
          color="black"
          class="text-container chat"
          id="lastMessage"
          *ngIf="
            chat?.messages[chat.messages.length - 1]?.senderID !== chat?.recipient?.uid
          "
        >
          {{
            shorten("You: " + chat?.messages[chat.messages.length - 1]?.content)
          }}</ion-label
        >
        <!-- <span> {{ getDate(chat.messages[chat.messages.length - 1].time) }}</span> -->
      </div>
      <ion-badge color="danger" id="unread-badge">{{ calcUnread(chat) }}</ion-badge>
    </ion-item>
  </ion-list>
</ion-content>
